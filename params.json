{"name":"Metatune","body":"# Installation and Requirements\r\n\r\n## Requirements \r\n\r\n * PHP 5\r\n * Enabled fopen wrappers.\r\n * Read/Write access to server (For caching)\r\n\r\n## How to install\r\n\r\n * Download latest version of MetaTune\r\n * Upload `/lib` and all it's contents to your web server. \r\n * Edit `/lib/config.php` to fit yout need. \r\n * Look at some of the examples or read the FeatureList for help using MetaTune. \r\n\r\n\r\n## Features\r\nSome features includes:\r\n\r\n * Search for Track/Artist/Album\r\n * Lookup detailed/basic info about Track/Artist/Album\r\n * Exceptions for error handling. \r\n * Caching metadata.\r\n * XML Import/Export for quick save/load.\r\n * NEW: Generate Play Buttons from searches/lookups or objects. \r\n\r\nLook at [the Wiki](https://github.com/mikaelbr/metatune/wiki/Features-of-MetaTune---Spotify-Metadata-API-PHP-Wrapper) for usage and full support. \r\nThe usage of the regular metatune class can be read below the new Play Button implementation. \r\n\r\n# New: Play Button implementation\r\n\r\nThe Metatune wrapper now supports [the new Spotify Play Button](https://developer.spotify.com/technologies/spotify-play-button/). The play buttons can be generated from the history of your searches/lookups, from an album or track object, a playlist URI or just an array of tracks. \r\nSee the examples below the settings\r\n\r\n## Settings\r\n\r\n<table>\r\n<tr><th>Variable name</th><th>Description</th></tr>\r\n<tr><td>playButtonHeight</td><td>Height of the player (int). To be large player, the height needs to be 80px more than the width. Default: 330.</td></tr>\r\n<tr><td>playButtonWidth</td><td>Width of the player (int). Default: 250.</td></tr>\r\n<tr><td>playButtonTheme</td><td>Player theme. Can be ```white``` or ```black```. Default value: ```black```.</td></tr>\r\n<tr><td>playButtonView</td><td>Player view type. Can be ```coverart``` or ```list```. Default: ```list```.</td></tr>\r\n</table>\r\n\r\nSee [Spotify documentation](https://developer.spotify.com/technologies/spotify-play-button/) for more description of the settings.\r\n\r\n## Play Button autogenerated from lookup\r\n\r\n```php\r\n<?php\r\n    // Get the metatune instance. \r\n    $spotify = MetaTune::getInstance();\r\n    $spotify->autoAddTracksToPlayButton = true; // Will add all searches for tracks into a list.\r\n    $spotify->playButtonHeight = 330; // For viewing the entire playlist\r\n    $spotify->playButtonTheme = \"white\"; // Changing theme\r\n    $spotify->playButtonView = \"list\"; // Changing view\r\n    try\r\n    {\r\n        $tracks = array(\r\n            $spotify->lookup(\"spotify:track:4kO7mrAPfqIrsKwUOK5BFx\"),\r\n            $spotify->lookup(\"spotify:track:0n49fCjNGsbtNOE6cuWk79\"),\r\n            $spotify->lookup(\"spotify:track:5kQ7CU798Sqm1BWNbYHFMa\"),\r\n            $spotify->lookup(\"spotify:track:57Xjny5yNzAcsxnusKmAfA\")\r\n        );\r\n\r\n        echo $spotify->getPlayButtonAutoGenerated(\"My favorites\");\r\n    }\r\n    catch (MetaTuneException $ex)\r\n    {\r\n        die(\"<pre>Error\\n\" . $ex . \"</pre>\");\r\n    }\r\n?>\r\n```\r\n\r\n### Result\r\n\r\n![Autogenerated play button](https://github.com/mikaelbr/metatune/raw/master/screenshots/playbutton_auto.png)\r\n\r\n\r\n## Play Button from album object.\r\n\r\n```php\r\n<?php\r\n    // Get the metatune instance. \r\n    $spotify = MetaTune::getInstance();\r\n    try\r\n    {\r\n        // Need to be detailed, to have all tracks. (second argument true)\r\n        $album = $spotify->lookupAlbum(\"spotify:album:6MBuQugGuX7VMBX0uiBnAQ\", true);\r\n        echo $spotify->getPlayButtonFromAlbum($album);\r\n    }\r\n    catch (MetaTuneException $ex)\r\n    {\r\n        die(\"<pre>Error\\n\" . $ex . \"</pre>\");\r\n    }\r\n?>\r\n```\r\n\r\n### Result\r\n\r\n![Album play button](https://github.com/mikaelbr/metatune/raw/master/screenshots/playbutton_album.png)\r\n\r\nMore examples in the ```examples``` directory.\r\n\r\n# Usage Spotify Metadata API\r\n\r\nYou can pretty much do anything in the Spotify Metadata API with this library, and then some. Below you'll find all the features and some short example of how to use them. \r\n\r\nIn common for all the features, it requires a object of the MetaTune-class.\r\n\r\n```php\r\n<?php\r\n    $spotify = MetaTune::getInstance();\r\n?>\r\n```\r\n\r\n\r\n## Search for Track/Artist/Album\r\n\r\nYou can search for everything in MetaTune. Not only tracks, but albums and artists aswell. In this example however, I will limit myself to just showing search for artists. The code would essentially be the same.\r\n\r\n<table>\r\n<tr><th>Method overview</th><th>Description</th></tr>\r\n<tr><td>searchTrack()</td><td>Search for tracks. Will return an array of tracks</td></tr>\r\n<tr><td>searchArtist()</td><td>Search for artists. Will return an array of artists</td></tr>\r\n<tr><td>searchAlbum()</td><td>Search for albums. Will return an array of albums</td></tr>\r\n</table>\r\n\r\n```php\r\n<?php\r\n// We have the MetaTune-object; $spotify\r\n\r\n// First we take a search\r\n$trackResults = $spotify->searchTrack (\"Superfamily\");\r\n\r\nif(count($trackResults) > 0) {\r\n    $out = count($trackResults) . \" results \\n<ul>\";\r\n    foreach($trackResults as $track) {\r\n          // $track is now an object of the class Track. \r\n          $out . \"\\t<li>{$track}</li>\\n\";\r\n    }\r\n    echo $out . \"</ul>\";\r\n} else {\r\n    echo \"No results\";\r\n}\r\n?>\r\n```\r\n\r\n### Spotify advanced search syntax\r\n\r\nMetaTune supports all of Spotify's advanced search queries. See more information on [Spotify Advanced Search Syntax](http://www.spotify.com/no/about/features/advanced-search-syntax/).\r\n\r\n## Lookup detailed/basic info about Track/Artist/Album\r\n\r\nSome times all you got is a Spotify URI, such as ```spotify:track:4CwcvWeCi2rFcLPIJCOwXw```, and want to lookup detailed/basic information about a Track/Artist/Album. \r\n\r\n<table>\r\n<tr><th>Method overview</th><th>Description</th></tr>\r\n<tr><td>lookupTrack()</td><td>Get all information about a track. Popularity, duration, artist, album, number and disc in album</td></tr>\r\n<tr><td>lookupArtist()</td><td>Get basic information about an artist. This includes name and popularity</td></tr>\r\n<tr><td>lookupArtistDetailed()</td><td>Get detailed information about an artist. This includes basic info + all the artist's albums</td></tr>\r\n<tr><td>lookupAlbum()</td><td>Get basic info about an album. This includes release date, popularity, name.</td></tr>\r\n<tr><td>lookupAlbumDetailed()</td><td>Get detailed information about an album. This includes basic info + all the album's tracks.</td></tr>\r\n<tr><td>lookup()</td><td>Uses the Spotify URI to determine what to look up.</td></tr>\r\n</table>\r\n\r\n```php\r\n<?php\r\n// We have the MetaTune-object; $spotify\r\n\r\n// Get all information about a track!\r\n$track = $spotify->lookup(\"spotify:track:4CwcvWeCi2rFcLPIJCOwXw\");\r\n\r\n// Print all results\r\necho \"<pre>\" . print_r($track, 1) . \"</pre>\";\r\n?>\r\n```\r\n\r\n## Exceptions\r\n\r\nBut what if the Spotify URI is in a wrong format or is not found? Then we have exceptions to tell us. Lets try to use exceptions in the example from lookup. \r\n\r\n```php\r\n<?php\r\n// We have the MetaTune-object; $spotify\r\n\r\ntry {\r\n   // Get all information about a track!\r\n   $track = $spotify->lookup(\"spotify:track:WRONG_URI\");\r\n   // all lookup-methods throws a MetaTuneException. We'll try to catch one. \r\n\r\n   // Print all results\r\n   echo \"<pre>\" . print_r($track, 1) . \"</pre>\";\r\n} catch (MetaTuneException $ex) {\r\n   echo \"Could not retrive information: \" . $ex->getMessage();\r\n}\r\n?>\r\n```\r\n\r\n## Caching\r\n\r\nAll access to the Spotify-servers will be cached as long as certain constants are set in the MetaTune class. Caching is activated per default.\r\n\r\nThe caching works by saving files locally on your server with this format: ```path/to/dir/<YOUR_PREFIX>_<MD5(\"THE_SEARCH_QUERY\")>.xml```\r\n\r\nSearch query is stripped of some non-alphanumerical signs and trimmed. \r\n\r\nThe Spotify servers only send information on requests as long as ```If-Modified-Since``` header field doesn't kick in. If a cache exists of a search the header field would be appended to the file request, and Spotify won't send you any data.  All this happens automaticly as long as you have caching activated. \r\n\r\nTo activate/deactivate or change cache settings in any way, you can do this at the top of MetaTune\r\n\r\n```php\r\n<?php\r\n    const CACHE_DIR = 'lib/cache/'; // Cache directory (must be writable)\r\n    const USE_CACHE = false; // Should caching be activated?\r\n    const CACHE_PREFIX = \"METATUNE_CACHE_\"; // prefix for cache-files. \r\n?>\r\n```\r\n\r\n\r\n## XML Import/Export\r\n\r\nWith XML import and/or export you can easily create XML structure of your searches. All ready to be saved to files and/or database (XML-types). \r\n\r\nHere's an example of usage:\r\n \r\n```php\r\n<?php\r\n// ***Test for array of tracks***\r\n$trackList = $spotify->searchTrack(\"Superfamily\");\r\n$tracksXML = $spotify->generateXML($trackList);\r\n            \r\n// This should now be the same as $trackList\r\n$tracksImport = $spotify->parseXMLTracks($tracksXML);\r\n// Demo print to check correct content\r\necho \"<pre>\" . print_r($tracksImport, 1) . \"</pre>\";\r\n?>\r\n```\r\n\r\nIn this case ```$tracksXML``` will contain something like:\r\n\r\n```xml\r\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<tracks>\r\n    <track href=\"spotify:track:3BbfQLpcj0BfjM5rq8Ioj9\"><![CDATA[]]>\r\n        <name><![CDATA[The Radio Has Expressed Concerns About What You Did Last Night]]></name>\r\n        <artist href=\"spotify:artist:5ObUhLdIEbhEqVCYxzVQ9l\"><![CDATA[]]>\r\n            <name><![CDATA[Superfamily]]></name>\r\n            <albums><![CDATA[]]></albums>\r\n            <popularity><![CDATA[0]]></popularity>\r\n        </artist>\r\n        <album href=\"spotify:album:2PABf16wrJQau7JuDTqTzx\"><![CDATA[]]>\r\n            <name><![CDATA[The Radio Has Expressed Concerns About What You Did Last Night]]></name>\r\n            <artist href=\"spotify:artist:5ObUhLdIEbhEqVCYxzVQ9l\"><![CDATA[]]>\r\n                <name><![CDATA[Superfamily]]></name>\r\n                <albums><![CDATA[]]></albums>\r\n                <popularity><![CDATA[0]]></popularity>\r\n            </artist>\r\n            <tracks><![CDATA[]]></tracks>\r\n            <popularity><![CDATA[0]]></popularity>\r\n            <released><![CDATA[2007]]></released>\r\n        </album>\r\n        <length><![CDATA[245.013]]></length>\r\n        <popularity><![CDATA[0.56061]]></popularity>\r\n        <track-number><![CDATA[1]]></track-number>\r\n        <disc-number><![CDATA[0]]></disc-number>\r\n    </track>\r\n    \r\n    [. . .]\r\n\r\n</tracks>\r\n```\r\n\r\nAnd ```$tracksImport``` will contain your original data:\r\n\r\n```php\r\nArray\r\n(\r\n    [0] => Track Object\r\n        (\r\n            [uri:Track:private] => spotify:track:3BbfQLpcj0BfjM5rq8Ioj9\r\n            [title:Track:private] => The Radio Has Expressed Concerns About What You Did Last Night\r\n            [artist:Track:private] => Artist Object\r\n                (\r\n                    [uri:Artist:private] => spotify:artist:5ObUhLdIEbhEqVCYxzVQ9l\r\n                    [name:Artist:private] => Superfamily\r\n                    [popularity:Artist:private] => 0\r\n                    [albums:Artist:private] => Array\r\n                        (\r\n                        )\r\n\r\n                    [spotifyBase] => http://open.spotify.com/\r\n                )\r\n\r\n            [album:Track:private] => Album Object\r\n                (\r\n                    [uri:Album:private] => spotify:album:2PABf16wrJQau7JuDTqTzx\r\n                    [name:Album:private] => The Radio Has Expressed Concerns About What You Did Last Night\r\n                    [release:Album:private] => 2007\r\n                    [popularity:Album:private] => 0\r\n                    [artist:Album:private] => Artist Object\r\n                        (\r\n                            [uri:Artist:private] => spotify:artist:5ObUhLdIEbhEqVCYxzVQ9l\r\n                            [name:Artist:private] => Superfamily\r\n                            [popularity:Artist:private] => 0\r\n                            [albums:Artist:private] => Array\r\n                                (\r\n                                )\r\n\r\n                            [spotifyBase] => http://open.spotify.com/\r\n                        )\r\n\r\n                    [tracks:Album:private] => Array\r\n                        (\r\n                        )\r\n\r\n                    [spotifyBase] => http://open.spotify.com/\r\n                )\r\n\r\n            [length:Track:private] => 245.013\r\n            [popularity:Track:private] => 0.56061\r\n            [trackNr:Track:private] => 1\r\n            [discNr:Track:private] => 0\r\n            [spotifyBase] => http://open.spotify.com/\r\n        )\r\n    \r\n    [. . . ]\r\n\r\n)\r\n```\r\nSee more examples of XML import/export in xmltest.php\r\n\r\n\r\n```\r\nThis program is free software: you can redistribute it and/or modify\r\nit under the terms of the GNU General Public License as published by\r\nthe Free Software Foundation, either version 3 of the License, or\r\n(at your option) any later version.\r\n\r\nThis program is distributed in the hope that it will be useful,\r\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\r\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\nGNU General Public License for more details.\r\n\r\nYou should have received a copy of the GNU General Public License\r\nalong with this program.  If not, see http://www.gnu.org/licenses/.\r\n```\r\n\r\n```\r\nSPOTIFY Disclaimer\r\nThis product uses a SPOTIFY API but is not endorsed, certified or otherwise\r\napproved in any way by Spotify. Spotify is the registered trade mark of the\r\nSpotify Group.\r\n```\r\n","tagline":"PHP Wrapper for the Spotify Metadata API and the Spotify Play Button","google":"UA-16316654-3","note":"Don't delete this file! It's used internally to help with page regeneration."}